# Escape Room - 방탈출 관리 시스템

## UI

### 🚀 어드민 화면

`/admin` 요청 시 어드민 메인 화면을 응답한다.

### 🚀 어드민 예약 화면

`/admin/reservation` 요청 시 예약 관리 화면을 응답한다.

### 🚀 어드민 시간 화면

`/admin/time` 요청 시 시간 관리 화면을 응답한다.

### 🚀 사용자 예약 화면

`/reservation` 요청 시 사용자 예약 화면을 응답한다.

### 🚀 인기 테마 화면

`/` 요청 시 인기 테마 화면을 응답한다.

## API

### ⭐️Auth

#### 로그인

요청으로온 아이디와 비밀번호를 통해 로그인을 할 수 있다.

#### 로그아웃

로그아웃 API를 통해 로그아웃을 할 수 있다.

### 로그인 확인

로그인 확인 API를 통해 현재 로그인한 멤버를 알 수 있다.

### 👤 멤버

#### 멤버 조회

멤버 조회 API를 통해 멤버 목록을 조회한다.

#### 회원가입

회원 가입 API를 통해 회원 가입을 할 수 있다.

### 💎 예약

#### 예약 조회

예약 목록 조회 API를 통해 예약 목록을 조회한다.

#### 예약 추가

예약 추가 API를 통해 예약을 추가한다.

#### 예약 취소

예약 취소 API를 통해 예약을 취소한다.

### 💎 시간

#### 시간 조회

시간 목록 조회 API를 통해 시간 목록을 조회한다.

#### 이용가능한 시간 조회

이용가능한 시간 목록 조회 API를 통해 이용가능한 시간 목록을 조회한다.

#### 시간 추가

시간 추가 API를 통해 시간을 추가한다.

#### 시간 삭제

시간 삭제 API를 통해 시간을 삭제한다.

### 💎 테마

#### 테마 조회

테마 목록 조회 API를 통해 테마 목록을 조회한다.

#### 인기있는 테마 조회

인기있는 테마 목록 조회 API를 통해 인기있는 테마 목록을 조회한다.

#### 테마 추가

테마 추가 API를 통해 테마를 추가한다.

#### 테마 삭제

테마 삭제 API를 통해 테마를 삭제한다.

## 📌 요구 사항

- [x] 4단계 - 사용자 로그인
    - [x] 사용자 도메인을 추가한다.
        - [x] 사용자는 name/email/password를 가진다.
    - [x] 로그인 기능을 구현한다.
        - [x] GET /login 요청 시 로그인 폼이 있는 페이지를 응답
        - [x] POST /login 요청 시 로그인 폼에 입력한 email, password 값을 body에 포함하기
            - [x] email과 password를 이용해서 멤버를 조회
            - [x] 조회한 멤버로 토큰 만들기 and Cookie를 만들어 응답
        - [x] 응답 Cookie에 "token"값으로 토큰이 포함되도록 하기
    - [x] 인증 정보 조회(GET /login/check)하는 API를 만들기
        - [x] Cookie에서 토큰 정보를 추출하기
    - [x] 로그인 후 Cookie를 이용하여 사용자의 정보를 조회하는 API 구현
        - [x] jwt 토큰 사용
        - [x] 멤버를 찾아 멤버 정보를 응답
    - [x] 로그인 기능 구현 완료 후 클라이언트 코드에 있는 로그인 관련 로직 활성화
- [x] 5단계 - 로그인 리팩터링
    - [x] 사용자의 정보를 조회하는 로직을 리팩터링
        - [x] cookie에 담긴 인증 정보를 이용해서 멤버 객체를 만드는 로직을 분리
            - [x] HandlerMethodArgumentResolver을 활용
    - [x] 예약 생성 API 및 기능을 리팩터링 for 사용자
        - [x] 사용자가 예약 생성 시, 로그인한 사용자 정보를 활용하도록 리팩터링
        - [x] reservation.html, user-reservation.js 파일의 TODO 주석을 참고하여 변경된 명세에 맞게 클라이언트가 동작하도록 변경
    - [x] 예약 생성 API 및 기능을 리팩터링 for 어드민
        - [x] 관리자가 예약 생성 시, 유저를 조회하여 선택 후 예약을 생성하도록 리팩터링
        - [x] admin/reservation-new.html 파일에서 안내된 4단계 관련 주석에 따라, 로딩하는 js 파일을 변경
- [x] 6단계 - 관리자 기능
    - [x] 어드민 페이지 진입은 admin권한이 있는 사람만 할 수 있도록 제한하기
        - [x] Member의 Role이 ADMIN 인 사람만 /admin 으로 시작하는 페이지에 접근할 수 있다.
        - [x] HandlerInterceptor를 활용하여 권한을 확인하고, 권한이 없는 경우 요청에 대한 거부 응답
    - [x] 관리자가 조건에 따라 예약을 검색할 수 있도록 기능을 추가
        - [x] 예약이 많아질 경우 관리가 용이하도록 예약 검색 기능을 추가
        - [x] 예약자별, 테마별, 날짜별 검색 조건을 사용해 예약 검색이 가능하도록 기능을 추가
